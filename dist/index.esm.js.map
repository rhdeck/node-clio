{"version":3,"file":"index.esm.js","sources":["../src/index.js"],"sourcesContent":["import fetch from \"node-fetch\";\nimport { URLSearchParams } from \"url\";\nimport { createHmac } from \"crypto\";\nimport { createWriteStream, readFile } from \"fs\";\nimport { promisify } from \"util\";\n//#region Function API\nconst baseHost = \"https://app.clio.com\";\nconst baseUrl = baseHost + \"/api/v4\";\nconst getResult = async ret => {\n  if (ret.status === 204) return null;\n  const text = await ret.text();\n  try {\n    const obj = JSON.parse(text);\n    if (obj.error) {\n      throw JSON.stringify(obj.error);\n    }\n    return obj;\n  } catch (e) {\n    console.log(\n      \"Hit error parsing result in getResult, probable error message\"\n    );\n    console.log(text);\n    throw text;\n  }\n};\nconst authorize = async ({ clientId, clientSecret, code, redirectUri }) => {\n  const body = new URLSearchParams({\n    client_id: clientId,\n    client_secret: clientSecret,\n    code,\n    redirect_uri: redirectUri,\n    grant_type: \"authorization_code\"\n  });\n  const res = await fetch(baseHost + \"/oauth/token\", {\n    method: \"post\",\n    body\n  });\n  const text = await res.text();\n  try {\n    const obj = JSON.parse(text);\n    const { access_token, refresh_token, expires_in } = obj;\n    return {\n      accessToken: access_token,\n      refreshToken: refresh_token,\n      expiresIn: expires_in\n    };\n  } catch (e) {\n    console.log(\n      \"Hit error parsing result in authorize, probable error message\"\n    );\n    console.log(text);\n    throw text;\n  }\n};\nconst deauthorize = async ({ accessToken }) => {\n  const headers = {\n    Authorization: `Bearer ${accessToken}`\n  };\n  const url = new URL(baseHost + \"/oauth/deauthorize\");\n  await fetch(url, { headers });\n  return true;\n};\nconst getAccessToken = async ({ clientId, clientSecret, refreshToken }) => {\n  const body = new URLSearchParams({\n    client_id: clientId,\n    client_secret: clientSecret,\n    refresh_token: refreshToken,\n    grant_type: \"refresh_token\"\n  });\n  const res = await fetch(baseHost + \"/oauth/token\", {\n    method: \"post\",\n    body\n  });\n  const text = await res.text();\n  try {\n    const { access_token, refresh_token, expires_in } = JSON.parse(text);\n    return {\n      accessToken: access_token,\n      refreshToken: refresh_token,\n      expiresIn: expires_in\n    };\n  } catch (e) {\n    console.log(\"Hit error parsing result, probable error message\");\n    console.log(text);\n    throw text;\n  }\n};\nconst makeFields = fields => {\n  return (\n    fields &&\n    fields\n      .map(field => {\n        if (typeof field === \"string\") return field;\n        if (typeof field === \"object\") {\n          const { field: fieldName, fields } = field;\n          return `${fieldName}{${fields}}`;\n        }\n      })\n      .join(\",\")\n  );\n};\nconst gets = async ({ path, fields, accessToken, headers, ...args }) => {\n  headers = {\n    ...(headers || {}),\n    Authorization: `Bearer ${accessToken}`\n  };\n  const url = new URL(baseUrl);\n  url.pathname = `${url.pathname}/${path}.json`;\n  if (fields) url.searchParams.append(\"fields\", makeFields(fields));\n  Object.entries(args).forEach(([k, v]) => url.searchParams.append(k, v));\n  const ret = await fetch(url, { method: \"get\", headers });\n  return getResult(ret);\n};\nconst bulkGetRaw = async ({\n  path,\n  fields,\n  accessToken,\n  onProgress,\n  ...args\n}) => {\n  const headers = {\n    \"X-BULK\": \"true\",\n    Authorization: `Bearer ${accessToken}`\n  };\n  //Kick off the bulk fetch\n  const url = new URL(baseUrl);\n  url.pathname = `${url.pathname}/${path}.json`;\n  if (fields) url.searchParams.append(\"fields\", makeFields(fields));\n  Object.entries(args).forEach(([k, v]) => url.searchParams.append(k, v));\n  const ret = await fetch(url, { method: \"get\", headers });\n\n  const pollCheckURL = ret.headers.get(\"Location\");\n  const doCheck = true;\n  while (doCheck) {\n    const ret = await fetch(pollCheckURL, { method: \"get\", headers });\n    switch (ret.code) {\n      case 200:\n        //Nothing to do\n        if (onProgress) {\n          const text = await ret.text();\n          const obj = JSON.parse(text);\n          await onProgress(obj);\n        }\n        break;\n      case 303:\n        //Woot!\n        return fetch(ret.headers.get(\"Location\"));\n    }\n  }\n  throw \"Failed to download bulk\";\n};\nconst bulkGetText = async ({\n  path,\n  fields,\n  accessToken,\n  onProgress,\n  outPath\n}) => {\n  if (outPath) {\n    await bulkGetFile({ path, fields, accessToken, onProgress, outPath });\n    return await promisify(readFile)(outPath);\n  } else {\n    const ret = await bulkGetRaw({ path, fields, accessToken, onProgress });\n    return await ret.text();\n  }\n};\nconst bulkGetFile = async ({\n  path,\n  fields,\n  accessToken,\n  onProgress,\n  outPath\n}) => {\n  const ret = await bulkGetRaw({ path, fields, accessToken, onProgress });\n  await new Promise(r => {\n    ret.body.pipe(createWriteStream(outPath));\n    ret.body.on(\"end\", () => r());\n  });\n};\nconst bulkGetObj = async ({\n  path,\n  fields,\n  accessToken,\n  onProgress,\n  outPath\n}) => {\n  const text = bulkGetText({ path, fields, accessToken, onProgress, outPath });\n  return JSON.parse(text);\n};\nconst makeWebHook = async ({\n  url,\n  fields,\n  events,\n  model,\n  expires,\n  accessToken\n}) => {\n  const headers = {\n    Authorization: `Bearer ${accessToken}`,\n    [\"Content-Type\"]: \"application/json\"\n  };\n  const whUrl = new URL(baseUrl + \"/webhooks.json\");\n  if (!model) throw \"Model is required\";\n  const data = { model };\n  if (!url) throw \"url is required\";\n  data.url = url;\n  if (events) data.events = events;\n  if (!fields) throw \"fields are required\";\n  data.fields = makeFields(fields);\n  if (expires && !(expires instanceof Date)) expires = new Date(expires);\n  if (expires) data.expires_at = expires.toISOString();\n  const bodyObj = { data };\n  const body = JSON.stringify(bodyObj);\n  const ret = await fetch(whUrl, {\n    method: \"post\",\n    headers,\n    body\n  });\n  const text = await ret.text();\n  try {\n    const obj = JSON.parse(text);\n    if (obj.error) {\n      //Oh noes\n      throw obj;\n    }\n    return obj;\n  } catch (e) {\n    console.log(\n      \"Hit error parsing result in makewebhook, probable error message\"\n    );\n    console.log(text);\n    throw text;\n  }\n};\nconst validateSignature = ({ signature, secret, body }) => {\n  const cipher = createHmac(\"sha256\", secret);\n  cipher.update(body);\n  const calculatedSignature = cipher.digest(\"hex\");\n  return signature !== calculatedSignature;\n};\nconst create = async ({\n  path,\n  fields,\n  data,\n  body: tempBody,\n  accessToken,\n  ...args\n}) => {\n  const url = new URL(baseUrl);\n  const headers = {\n    Authorization: `Bearer ${accessToken}`,\n    \"Content-Type\": \"application/json\"\n  };\n  url.pathname = `${url.pathname}/${path}.json`;\n  if (fields) url.searchParams.append(\"fields\", makeFields(fields));\n  Object.entries(args).forEach(([k, v]) => url.searchParams.append(k, v));\n  const body = JSON.stringify({ data, ...(tempBody || {}) });\n  const ret = await fetch(url, { method: \"post\", headers, body });\n  return getResult(ret);\n};\nconst get = async ({ path, id, fields, accessToken, ...args }) => {\n  const headers = {\n    Authorization: `Bearer ${accessToken}`\n  };\n  const url = new URL(baseUrl);\n  url.pathname = `${url.pathname}/${path}/${id}.json`;\n  url.searchParams.append(\"fields\", makeFields(fields));\n  Object.entries(args).forEach(([k, v]) => url.searchParams.append(k, v));\n  const ret = await fetch(url, { method: \"get\", headers });\n  return getResult(ret);\n};\nconst update = async ({\n  etag,\n  path,\n  id,\n  fields,\n  data,\n  accessToken,\n  ...args\n}) => {\n  if (!etag) etag = data.etag;\n  const headers = {\n    Authorization: `Bearer ${accessToken}`,\n    \"IF-MATCH\": etag,\n    \"Content-Type\": \"application/json\"\n  };\n  const url = new URL(baseUrl);\n  url.pathname = `${url.pathname}/${path}/${id}.json`;\n  url.searchParams.append(\"fields\", makeFields(fields));\n  Object.entries(args).forEach(([k, v]) => url.searchParams.append(k, v));\n  const body = JSON.stringify({ data });\n  const ret = await fetch(url, { method: \"patch\", body, headers });\n  return getResult(ret);\n};\nconst remove = async ({ path, id, accessToken, ...args }) => {\n  const headers = {\n    Authorization: `Bearer ${accessToken}`\n  };\n  const url = new URL(baseUrl);\n  url.pathname = `${url.pathname}/${path}/${id}.json`;\n  Object.entries(args).forEach(([k, v]) => url.searchParams.append(k, v));\n  const ret = await fetch(url, { method: \"delete\", headers });\n  return getResult(ret);\n};\n//#endregion\n//#region Clio class\nclass Clio {\n  constructor({\n    clientId,\n    clientSecret,\n    refreshToken,\n    accessToken,\n    onNewRefreshToken\n  }) {\n    // if (!clientId || !clientSecret)\n    //   throw \"Clio must be initialized with a clientId and a clientSecret\";\n    this.clientId = clientId;\n    this.clientSecret = clientSecret;\n    this.refreshToken = refreshToken;\n    this.accessToken = accessToken;\n    if (onNewRefreshToken) this.onNewRefreshToken = onNewRefreshToken;\n  }\n  async load() {\n    return this;\n  }\n  async authorize({ code, redirectUri }) {\n    if (!code || !redirectUri)\n      throw \"Authorize requires a code and the redirectUri passed in the initial authorization request\";\n    const { refreshToken, accessToken } = await authorize({\n      clientId: this.clientId,\n      clientSecret: this.clientSecret,\n      code,\n      redirectUri\n    });\n    if (accessToken) {\n      this.accessToken = accessToken;\n      this.refreshToken = refreshToken;\n      if (refreshToken && this.onNewRefreshToken)\n        await this.onNewRefreshToken(refreshToken);\n      return { accessToken, refreshToken };\n    } else {\n      throw \"could not authorize with these credentials\";\n    }\n  }\n  async deauthorize() {\n    const accessToken = await this.getAccessToken();\n    await deauthorize({ accessToken });\n    return this.onNewRefreshToken(null);\n  }\n  async getRefreshToken() {\n    return this.refreshToken;\n  }\n  async _getRefreshToken() {\n    if (this.refreshToken) return this.refreshToken;\n    this.refreshToken = await this.getRefreshToken();\n    return this.refreshToken;\n  }\n  async getAccessToken() {\n    if (this.accessToken) return this.accessToken;\n    const refreshToken = await this._getRefreshToken();\n    if (!refreshToken)\n      throw \"Cannot get an access token without a refresh token\";\n    const { accessToken, refreshToken: newToken } = await getAccessToken({\n      clientId: this.clientId,\n      clientSecret: this.clientSecret,\n      refreshToken\n    });\n    this.accessToken = accessToken;\n    if (newToken) {\n      this.refreshToken = newToken;\n      if (this.onNewRefreshToken) this.onNewRefreshToken(newToken);\n    }\n    return this.accessToken;\n  }\n  async get({ path, id, fields }) {\n    const accessToken = await this.getAccessToken();\n    return get({ path, id, fields, accessToken });\n  }\n  async gets({ path, fields }) {\n    const accessToken = await this.getAccessToken();\n    return gets({ path, fields, accessToken });\n  }\n  async create({ path, fields, data }) {\n    const accessToken = await this.getAccessToken();\n    return create({ path, fields, data, accessToken });\n  }\n  async update({ path, id, fields, etag, data }) {\n    const accessToken = await this.getAccessToken();\n    return update({\n      path,\n      id,\n      fields,\n      data,\n      etag,\n      accessToken\n    });\n  }\n  async remove({ path, id }) {\n    const accessToken = await this.getAccessToken();\n    return remove({ path, id, accessToken });\n  }\n  async getEntity(type, id, fields = null) {\n    const properties = await this.get({ path: type, id, fields });\n    return new ClioEntity(this, { properties, fields, id, type });\n  }\n  async withAccessToken(request) {\n    const accessToken = await this.getAccessToken();\n    const headers = {\n      Authorization: `Bearer ${accessToken}`\n    };\n    request.headers = request.headers\n      ? { ...request.headers, ...headers }\n      : headers;\n    return request;\n  }\n  async getPage({ url, path, fields, ...args }) {\n    const promise = url\n      ? this.getUrl({ url })\n      : this.gets({ path, fields, ...args });\n    const {\n      meta: { paging: { next, previous } = {} } = {},\n      data\n    } = await promise;\n    return {\n      page: data,\n      getNext: next && (() => this.getPage({ url: next, path, fields })),\n      getPrevious:\n        previous && (() => this.getPage({ url: previous, path, fields }))\n    };\n  }\n  async map({ path, fields, isSequential, ...args }, f) {\n    if (!path) throw \"Path is required for map\";\n    let obj = await this.getPage({ path, fields, ...args });\n    let out = [];\n    while (obj) {\n      const { page, getNext } = obj;\n      let temp = [];\n      if (isSequential) {\n        for (const o of page) {\n          const t = await f(o);\n          temp.push(t);\n        }\n      } else {\n        temp = await Promise.all(page.map(f));\n      }\n      out = [...out, ...temp];\n      if (getNext) obj = await getNext();\n      else obj = null;\n    }\n    return out;\n  }\n  async getAll({ path, fields, ...args }) {\n    if (!path) throw \"Path is required for getAll\";\n    return this.map({ path, fields, ...args }, o => o);\n  }\n  async bulkGetFile({ path, fields, outPath, onProgress }) {\n    if (!path) throw \"Path is required for bulkGetFile\";\n    const accessToken = await this.getAccessToken();\n    return bulkGetFile({ path, fields, accessToken, outPath, onProgress });\n  }\n  async bulkGetObj({ path, fields, onProgress, outPath }) {\n    if (!path) throw \"Path is required for bulkGetFile\";\n    const accessToken = await this.getAccessToken();\n    return bulkGetObj({ path, fields, accessToken, outPath, onProgress });\n  }\n  async mapEntities({ path, fields }, f) {\n    let getNextPage = await this.getPageEntities({ path, fields });\n    while (getNextPage) {\n      const { page, getNext } = getNextPage();\n      await Promise.all(page.map(f));\n      getNextPage = getNext;\n    }\n  }\n  async mapEntities2({ path, fields, ...args }, f) {\n    return this.map(\n      {\n        fields,\n        path,\n        ...args\n      },\n      properties => {\n        const entity = new ClioEntity(this, {\n          fields,\n          type: path,\n          properties\n        });\n        return f(entity);\n      }\n    );\n  }\n  async getPageEntities({ url, path, fields }) {\n    const { page, getNext, getPrevious } = await this.getPage({\n      url,\n      path,\n      fields\n    });\n    return this.withEntities({ page, getNext, getPrevious, path, fields });\n  }\n  async withEntities({ page, getNext, getPrevious, path, fields }) {\n    //convert page elements to entities\n    const entities = page.map(properties =>\n      this.makeEntity(this, {\n        fields,\n        properties,\n        type: path\n      })\n    );\n    return {\n      page: entities,\n      raw: page,\n      getNext:\n        getNext &&\n        (async () => {\n          const { page, getNext, getPrevious } = await getNext();\n          return this.withEntities({\n            page,\n            getNext,\n            getPrevious,\n            path,\n            fields\n          });\n        }),\n      getPrevious:\n        getPrevious &&\n        (async () => {\n          const { page, getNext, getPrevious } = await getPrevious();\n          return this.withEntities({\n            page,\n            getNext,\n            getPrevious,\n            path,\n            fields\n          });\n        })\n    };\n  }\n\n  async getUrl({ url, request }) {\n    if (!request) request = {};\n    request = await this.withAccessToken(request);\n    const res = await fetch(url, request);\n    return getResult(res);\n  }\n  async makeCustomAction({ label, targetUrl, uiReference, type }) {\n    if (type) uiReference = `${type}/show`;\n    if (!uiReference) throw \"uiReference is required\";\n    if (!label) throw \"label is required\";\n    if (!targetUrl) throw \"targeUrl is required\";\n    const {\n      data: {\n        id,\n        etag,\n        created_at,\n        updated_at,\n        label: newLabel,\n        target_url,\n        ui_reference\n      }\n    } = await this.create({\n      path: \"custom_actions\",\n      fields: [\n        \"label\",\n        \"target_url\",\n        \"ui_reference\",\n        \"id\",\n        \"etag\",\n        \"created_at\",\n        \"updated_at\"\n      ],\n      data: {\n        label,\n        target_url: targetUrl,\n        ui_reference: uiReference\n      }\n    });\n    return {\n      id,\n      etag,\n      createdAt: created_at,\n      updatedAt: updated_at,\n      label: newLabel,\n      targetUrl: target_url,\n      uiReference: ui_reference\n    };\n  }\n  async makeWebHook({ url, fields, events, model, expires }) {\n    const accessToken = await this.getAccessToken();\n    return await makeWebHook({\n      url,\n      fields,\n      events,\n      model,\n      expires,\n      accessToken\n    });\n  }\n  async makeEntity({ type, id, fields, properties }) {\n    return new ClioEntity(this, { type, id, fields, properties });\n  }\n  async clear(path) {\n    console.log(\"I am starting clear\", path);\n    const os = await this.getAll({ path });\n    console.log(\"I got my os\");\n    console.log(os);\n    for (const { id } of os) {\n      console.log(\"Removing\", id);\n      try {\n        await this.remove({ path, id });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    console.log(\"Done with clear\");\n  }\n}\n//#endregion\n//#region ClioEntity Class\nclass ClioEntity {\n  constructor(clio, { etag, id, properties, fields, type }) {\n    this.clio = clio;\n    this.properties = properties;\n    if (fields) this.fields = fields;\n    this.type = type;\n    this.id = id ? id : properties.id;\n    this.etag = etag ? etag : properties.etag;\n  }\n  async load() {\n    const { etag, ...properties } = await this.clio.get({\n      type: this.type,\n      id: this.id,\n      fields: this.fields\n    });\n    this.etag = etag;\n    this.properties = properties;\n    return this;\n  }\n  async update(changes) {\n    const ret = await this.clio.update({\n      path: this.type,\n      id: this.id,\n      data: changes,\n      etag: this.etag\n    });\n    this.properties = { ...this.properties, ret };\n    this.etag = ret.etag;\n  }\n  async delete() {\n    return this.clio.remove({ path: this.type, id: this.id });\n  }\n}\n//#endregion\nexport {\n  Clio,\n  ClioEntity,\n  getAccessToken,\n  get,\n  gets,\n  create,\n  update,\n  authorize,\n  remove,\n  makeFields,\n  deauthorize,\n  makeWebHook,\n  validateSignature,\n  baseHost\n};\n"],"names":["baseHost","baseUrl","getResult","ret","status","text","obj","JSON","parse","error","stringify","console","log","authorize","clientId","clientSecret","code","redirectUri","body","URLSearchParams","client_id","client_secret","redirect_uri","grant_type","fetch","method","res","access_token","refresh_token","expires_in","accessToken","refreshToken","expiresIn","deauthorize","headers","Authorization","url","URL","getAccessToken","makeFields","fields","map","field","fieldName","join","gets","path","args","pathname","searchParams","append","Object","entries","forEach","k","v","bulkGetRaw","onProgress","pollCheckURL","get","doCheck","bulkGetText","outPath","bulkGetFile","promisify","readFile","Promise","r","pipe","createWriteStream","on","bulkGetObj","makeWebHook","events","model","expires","whUrl","data","Date","expires_at","toISOString","bodyObj","validateSignature","signature","secret","cipher","createHmac","update","calculatedSignature","digest","create","tempBody","id","etag","remove","Clio","onNewRefreshToken","getRefreshToken","_getRefreshToken","newToken","type","properties","ClioEntity","request","promise","getUrl","meta","paging","next","previous","page","getNext","getPage","getPrevious","f","isSequential","out","temp","o","t","push","all","getPageEntities","getNextPage","entity","withEntities","entities","makeEntity","raw","withAccessToken","label","targetUrl","uiReference","target_url","ui_reference","created_at","updated_at","newLabel","createdAt","updatedAt","getAll","os","clio","changes"],"mappings":"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"}