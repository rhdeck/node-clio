{"version":3,"file":"index.esm.js","sources":["../src/index.js"],"sourcesContent":["import fetch from \"node-fetch\";\nimport FormData from \"form-data\";\nimport { URLSearchParams } from \"url\";\n//#region Function API\nconst authorize = async ({ clientId, clientSecret, code, redirectUri }) => {\n  const body = new URLSearchParams({\n    client_id: clientId,\n    client_secret: clientSecret,\n    code,\n    redirect_uri: redirectUri,\n    grant_type: \"authorization_code\"\n  });\n  console.log(\"sending authorize request\");\n  console.log(body.toString());\n  const res = await fetch(\"https://app.clio.com/oauth/token\", {\n    method: \"post\",\n    body\n  });\n  const text = await res.text();\n  console.log(\"I got text\");\n  console.log(text);\n  const obj = JSON.parse(text);\n  console.log(\"Obj result is \", obj);\n  const { access_token, refresh_token, expires_in } = obj;\n  return {\n    accessToken: access_token,\n    refreshToken: refresh_token,\n    expiresIn: expires_in\n  };\n};\nconst getAccessToken = async ({ clientId, clientSecret, refreshToken }) => {\n  const body = new URLSearchParams({\n    client_id: clientId,\n    client_secret: clientSecret,\n    refresh_token: refreshToken,\n    grant_type: \"refresh_token\"\n  });\n  console.log(\"sending authorize request wih \");\n  console.log(body);\n  const res = await fetch(\"https://app.clio.com/oauth/token\", {\n    method: \"post\",\n    body\n  });\n  console.log(\"got res from my request\");\n  console.log(res);\n  const { access_token, refresh_token, expires_in } = await res.json();\n  return {\n    accessToken: access_token,\n    refreshToken: refresh_token,\n    expiresIn: expires_in\n  };\n};\nconst makeFields = fields => {\n  return fields\n    .map(field => {\n      if (typeof field === \"string\") return field;\n      if (typeof field === \"object\") {\n        const { field: fieldName, fields } = field;\n        const fieldString = makeFields(fields);\n        return `${fieldName}{${fields}}`;\n      }\n    })\n    .join(\",\");\n};\nconst gets = async ({ path, fields, accessToken, ...args }) => {\n  const headers = {\n    Authorization: `Bearer ${accessToken}`\n  };\n  const url = new URL(\"https://app.clio.com/api/v4\");\n  url.pathname = `${url.pathname}/${path}.json`;\n  url.searchParams.append(\"fields\", makeFields(fields));\n  Object.entries(args).forEach(([k, v]) => url.searchParams.append(k, v));\n  const ret = await fetch(url, { method: \"get\", headers });\n  try {\n    const text = await ret.text();\n    const obj = JSON.parse(text);\n    return obj;\n  } catch (e) {\n    console.log(\"Hit error parsing result, probable error message\");\n    console.log(text);\n    throw text;\n  }\n};\nconst create = async ({ path, fields, data, accessToken }) => {\n  const headers = {\n    Authorization: `Bearer ${accessToken}`\n  };\n  const url = new URL(\"https://app.clio.com/api/v4\");\n  const body = new FormData();\n  body.append(\"data\", data);\n  url.pathname = `${url.pathname}/${path}.json`;\n  url.searchParams.append(\"fields\", makeFields(fields));\n  const ret = await fetch(url, { method: \"post\", headers, body });\n  try {\n    const text = await ret.text();\n    const obj = JSON.parse(text);\n    return obj;\n  } catch (e) {\n    console.log(\"Hit error parsing result, probable error message\");\n    console.log(text);\n    throw text;\n  }\n};\nconst get = async ({ path, id, fields, accessToken }) => {\n  const headers = {\n    Authorization: `Bearer ${accessToken}`\n  };\n  const url = new URL(\"https://app.clio.com/api/v4\");\n  url.pathname = `${url.pathname}/${path}/${id}.json`;\n  url.searchParams.append(\"fields\", makeFields(fields));\n  const ret = await fetch(url, { method: \"get\", headers });\n  try {\n    const text = await ret.text();\n    const obj = JSON.parse(text);\n    return obj;\n  } catch (e) {\n    console.log(\"Hit error parsing result, probable error message\");\n    console.log(text);\n    throw text;\n  }\n};\nconst update = async ({ etag, path, id, fields, data, accessToken }) => {\n  if (!etag) etag = data.etag;\n  const body = new FormData();\n  Object.entries(data).map(([k, v]) => body.append(k, v));\n  const headers = {\n    Authorization: `Bearer ${accessToken}`,\n    \"IF-MATCH\": etag,\n    ...body.getHeaders()\n  };\n  const url = new URL(\"https://app.clio.com/api/v4\");\n  url.pathname = `${url.pathname}/${path}/${id}.json`;\n  url.searchParams.append(\"fields\", makeFields(fields));\n  const ret = await fetch(url, { method: \"patch\", body, headers });\n\n  try {\n    const text = await ret.text();\n    const obj = JSON.parse(text);\n    return obj;\n  } catch (e) {\n    console.log(\"Hit error parsing result, probable error message\");\n    console.log(text);\n    throw text;\n  }\n};\nconst remove = async ({ path, id, accessToken }) => {\n  const headers = {\n    Authorization: `Bearer ${accessToken}`\n  };\n  const url = new URL(\"https://app.clio.com/api/v4\");\n  url.pathname = `${url.pathname}/${path}/${id}.json`;\n  const ret = await fetch(url, { method: \"delete\", headers });\n  try {\n    const text = await ret.text();\n    const obj = JSON.parse(text);\n    return obj;\n  } catch (e) {\n    console.log(\"Hit error parsing result, probable error message\");\n    console.log(text);\n    throw text;\n  }\n};\n//#endregion\n//#region Clio class\nclass Clio {\n  constructor({\n    clientId,\n    clientSecret,\n    refreshToken,\n    accessToken,\n    onNewRefreshToken\n  }) {\n    if (!clientId || !clientSecret)\n      throw \"Clio must be initialized with a clientId and a clientSecret\";\n    this.clientId = clientId;\n    this.clientSecret = clientSecret;\n    this.refreshToken = refreshToken;\n    this.accessToken = accessToken;\n    this.onNewRefreshToken = onNewRefreshToken;\n  }\n  async authorize({ code, redirectUri }) {\n    if (!code || !redirectUri)\n      throw \"Authorize requires a code and the redirectUri passed in the initial authorization request\";\n    const { refreshToken, accessToken } = await authorize({\n      clientId: this.clientId,\n      clientSecret: this.clientSecret,\n      code,\n      redirectUri\n    });\n    if (accessToken) {\n      this.accessToken = accessToken;\n      this.refreshToken = refreshToken;\n      if (refreshToken && this.onNewRefreshToken)\n        this.onNewRefreshToken(refreshToken);\n      return { accessToken, refreshToken };\n    } else {\n      throw \"could not authorize with these credentials\";\n    }\n  }\n  async getRefreshToken() {\n    return this.refreshToken();\n  }\n  async _getRefreshToken() {\n    if (this.refreshToken) return this.refreshToken;\n    this.refreshToken = await this.getRefreshToken();\n    return this.refreshToken;\n  }\n  async getAccessToken() {\n    if (this.accessToken) return this.accessToken();\n    const refreshToken = await _getRefreshToken();\n    if (!refreshToken)\n      throw \"Cannot get an access token without a refresh token\";\n    const { accessToken, refreshToken: newToken } = await getAccessToken({\n      clientId: this.clientId,\n      clientSecret: this.clientSecret,\n      refreshToken\n    });\n    this.accessToken = accessToken;\n    if (newToken) {\n      this.refreshToken = newToken;\n      if (this.onNewRefreshToken) this.onNewRefreshToken(newToken);\n    }\n    return history.accessToken;\n  }\n  async get({ path, id, fields }) {\n    const accessToken = await this.getAccessToken();\n    return get({ path, id, fields, accessToken });\n  }\n  async gets({ path, fields }) {\n    const accessToken = await this.getAccessToken();\n    return gets({ path, fields, accessToken });\n  }\n  async create({ path, fields, data }) {\n    const accessToken = await this.getAccessToken();\n    return create({ path, fields, data, accessToken });\n  }\n  async update({ path, id, fields, etag, data }) {\n    const accessToken = await this.getAccessToken();\n    return update({\n      path,\n      id,\n      fields,\n      data,\n      etag,\n      accessToken\n    });\n  }\n  async remove({ path, id }) {\n    const accessToken = await this.getAccessToken();\n    return remove({ path, id, accessToken });\n  }\n  async getEntity(type, id, fields = null) {\n    const properties = await this.get({ path: type, id, fields });\n    return new ClioEntity(this, { properties, fields, id, type });\n  }\n}\n//#endregion\n//#region ClioEntity Class\nclass ClioEntity {\n  constructor(clio, { etag, id, properties, fields, type }) {\n    this.clio = clio;\n    this.properties = properties;\n    if (fields) this.fields = fields;\n    this.type = path;\n    this.id = id ? id : properties.id;\n    this.etag = etag ? etag : properties.etag;\n  }\n  async update(changes) {\n    const ret = await this.clio.update({\n      path: this.type,\n      id: this.id,\n      data: changes\n    });\n    this.properties = { ...this.properties, ret };\n    this.etag = ret.etag;\n  }\n  async delete() {\n    return this.clio.remove({ path: this.type, id: this.id });\n  }\n}\n//#endregion\nexport {\n  Clio,\n  ClioEntity,\n  getAccessToken,\n  get,\n  gets,\n  create,\n  update,\n  authorize,\n  remove,\n  makeFields\n};\n"],"names":["authorize","clientId","clientSecret","code","redirectUri","body","URLSearchParams","client_id","client_secret","redirect_uri","grant_type","console","log","toString","fetch","method","res","text","obj","JSON","parse","access_token","refresh_token","expires_in","accessToken","refreshToken","expiresIn","getAccessToken","json","makeFields","fields","map","field","fieldName","fieldString","join","gets","path","args","headers","Authorization","url","URL","pathname","searchParams","append","Object","entries","forEach","k","v","ret","create","data","FormData","get","id","update","etag","getHeaders","remove","Clio","onNewRefreshToken","getRefreshToken","_getRefreshToken","newToken","history","type","properties","ClioEntity","clio","changes"],"mappings":";;;;;;;;;;;;;;AAIA,IAAMA,UAAS;;AAAA;;;2BAAG;;;;;;YAASC,QAAT,QAASA,QAAT,EAAmBC,YAAnB,QAAmBA,YAAnB,EAAiCC,IAAjC,QAAiCA,IAAjC,EAAuCC,WAAvC,QAAuCA,WAAvC;YACVC,IADU,GACH,IAAIC,eAAJ,CAAoB;cAC/BC,SAAS,EAAEN,QADoB;cAE/BO,aAAa,EAAEN,YAFgB;cAG/BC,IAAI,EAAJA,IAH+B;cAI/BM,YAAY,EAAEL,WAJiB;cAK/BM,UAAU,EAAE;aALD,CADG;YAQhBC,OAAO,CAACC,GAAR,CAAY,2BAAZ;YACAD,OAAO,CAACC,GAAR,CAAYP,IAAI,CAACQ,QAAL,EAAZ;;mBACkBC,KAAK,CAAC,kCAAD,EAAqC;cAC1DC,MAAM,EAAE,MADkD;cAE1DV,IAAI,EAAJA;aAFqB,CAVP;;;YAUVW,GAVU;;mBAcGA,GAAG,CAACC,IAAJ,EAdH;;;YAcVA,IAdU;YAehBN,OAAO,CAACC,GAAR,CAAY,YAAZ;YACAD,OAAO,CAACC,GAAR,CAAYK,IAAZ;YACMC,GAjBU,GAiBJC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAjBI;YAkBhBN,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BM,GAA9B;YACQG,YAnBQ,GAmBoCH,GAnBpC,CAmBRG,YAnBQ,EAmBMC,aAnBN,GAmBoCJ,GAnBpC,CAmBMI,aAnBN,EAmBqBC,UAnBrB,GAmBoCL,GAnBpC,CAmBqBK,UAnBrB;6CAoBT;cACLC,WAAW,EAAEH,YADR;cAELI,YAAY,EAAEH,aAFT;cAGLI,SAAS,EAAEH;aAvBG;;;;;;;;GAAH;;kBAATvB,SAAS;;;GAAf;;AA0BA,IAAM2B,eAAc;;AAAA;;;2BAAG;;;;;;;YAAS1B,QAAT,SAASA,QAAT,EAAmBC,YAAnB,SAAmBA,YAAnB,EAAiCuB,YAAjC,SAAiCA,YAAjC;YACfpB,IADe,GACR,IAAIC,eAAJ,CAAoB;cAC/BC,SAAS,EAAEN,QADoB;cAE/BO,aAAa,EAAEN,YAFgB;cAG/BoB,aAAa,EAAEG,YAHgB;cAI/Bf,UAAU,EAAE;aAJD,CADQ;YAOrBC,OAAO,CAACC,GAAR,CAAY,gCAAZ;YACAD,OAAO,CAACC,GAAR,CAAYP,IAAZ;;mBACkBS,KAAK,CAAC,kCAAD,EAAqC;cAC1DC,MAAM,EAAE,MADkD;cAE1DV,IAAI,EAAJA;aAFqB,CATF;;;YASfW,GATe;YAarBL,OAAO,CAACC,GAAR,CAAY,yBAAZ;YACAD,OAAO,CAACC,GAAR,CAAYI,GAAZ;;mBAC0DA,GAAG,CAACY,IAAJ,EAfrC;;;;YAebP,YAfa,SAebA,YAfa;YAeCC,aAfD,SAeCA,aAfD;YAegBC,UAfhB,SAegBA,UAfhB;8CAgBd;cACLC,WAAW,EAAEH,YADR;cAELI,YAAY,EAAEH,aAFT;cAGLI,SAAS,EAAEH;aAnBQ;;;;;;;;GAAH;;kBAAdI,cAAc;;;GAApB;;AAsBA,IAAME,UAAU,GAAG,SAAbA,UAAa,CAAAC,MAAM,EAAI;SACpBA,MAAM,CACVC,GADI,CACA,UAAAC,KAAK,EAAI;QACR,OAAOA,KAAP,KAAiB,QAArB,EAA+B,OAAOA,KAAP;;QAC3B,QAAOA,KAAP,MAAiB,QAArB,EAA+B;UACdC,SADc,GACQD,KADR,CACrBA,KADqB;UACHF,OADG,GACQE,KADR,CACHF,MADG;UAEvBI,WAAW,GAAGL,UAAU,CAACC,OAAD,CAA9B;uBACUG,SAAV,cAAuBH,OAAvB;;GANC,EASJK,IATI,CASC,GATD,CAAP;CADF;;AAYA,IAAMC,KAAI;;AAAA;;;2BAAG;;;;;;;YAASC,IAAT,SAASA,IAAT,EAAeP,MAAf,SAAeA,MAAf,EAAuBN,WAAvB,SAAuBA,WAAvB,EAAuCc,IAAvC;YACLC,OADK,GACK;cACdC,aAAa,mBAAYhB,WAAZ;aAFJ;YAILiB,GAJK,GAIC,IAAIC,GAAJ,CAAQ,6BAAR,CAJD;YAKXD,GAAG,CAACE,QAAJ,aAAkBF,GAAG,CAACE,QAAtB,cAAkCN,IAAlC;YACAI,GAAG,CAACG,YAAJ,CAAiBC,MAAjB,CAAwB,QAAxB,EAAkChB,UAAU,CAACC,MAAD,CAA5C;YACAgB,MAAM,CAACC,OAAP,CAAeT,IAAf,EAAqBU,OAArB,CAA6B;;kBAAEC,CAAF;kBAAKC,CAAL;;qBAAYT,GAAG,CAACG,YAAJ,CAAiBC,MAAjB,CAAwBI,CAAxB,EAA2BC,CAA3B,CAAZ;aAA7B;;mBACkBpC,KAAK,CAAC2B,GAAD,EAAM;cAAE1B,MAAM,EAAE,KAAV;cAAiBwB,OAAO,EAAPA;aAAvB,CARZ;;;YAQLY,GARK;;;mBAUUA,GAAG,CAAClC,IAAJ,EAVV;;;YAUHA,KAVG;YAWHC,GAXG,GAWGC,IAAI,CAACC,KAAL,CAAWH,KAAX,CAXH;8CAYFC,GAZE;;;;;YAcTP,OAAO,CAACC,GAAR,CAAY,kDAAZ;YACAD,OAAO,CAACC,GAAR,CAAYK,IAAZ;kBACMA,IAhBG;;;;;;;;GAAH;;kBAAJmB,IAAI;;;GAAV;;AAmBA,IAAMgB,OAAM;;AAAA;;;2BAAG;;;;;;;YAASf,IAAT,UAASA,IAAT,EAAeP,MAAf,UAAeA,MAAf,EAAuBuB,IAAvB,UAAuBA,IAAvB,EAA6B7B,WAA7B,UAA6BA,WAA7B;YACPe,OADO,GACG;cACdC,aAAa,mBAAYhB,WAAZ;aAFF;YAIPiB,GAJO,GAID,IAAIC,GAAJ,CAAQ,6BAAR,CAJC;YAKPrC,IALO,GAKA,IAAIiD,QAAJ,EALA;YAMbjD,IAAI,CAACwC,MAAL,CAAY,MAAZ,EAAoBQ,IAApB;YACAZ,GAAG,CAACE,QAAJ,aAAkBF,GAAG,CAACE,QAAtB,cAAkCN,IAAlC;YACAI,GAAG,CAACG,YAAJ,CAAiBC,MAAjB,CAAwB,QAAxB,EAAkChB,UAAU,CAACC,MAAD,CAA5C;;mBACkBhB,KAAK,CAAC2B,GAAD,EAAM;cAAE1B,MAAM,EAAE,MAAV;cAAkBwB,OAAO,EAAPA,OAAlB;cAA2BlC,IAAI,EAAJA;aAAjC,CATV;;;YASP8C,GATO;;;mBAWQA,GAAG,CAAClC,IAAJ,EAXR;;;YAWLA,MAXK;YAYLC,GAZK,GAYCC,IAAI,CAACC,KAAL,CAAWH,MAAX,CAZD;8CAaJC,GAbI;;;;;YAeXP,OAAO,CAACC,GAAR,CAAY,kDAAZ;YACAD,OAAO,CAACC,GAAR,CAAYK,IAAZ;kBACMA,IAjBK;;;;;;;;GAAH;;kBAANmC,MAAM;;;GAAZ;;AAoBA,IAAMG,IAAG;;AAAA;;;2BAAG;;;;;;;YAASlB,IAAT,UAASA,IAAT,EAAemB,EAAf,UAAeA,EAAf,EAAmB1B,MAAnB,UAAmBA,MAAnB,EAA2BN,WAA3B,UAA2BA,WAA3B;YACJe,OADI,GACM;cACdC,aAAa,mBAAYhB,WAAZ;aAFL;YAIJiB,GAJI,GAIE,IAAIC,GAAJ,CAAQ,6BAAR,CAJF;YAKVD,GAAG,CAACE,QAAJ,aAAkBF,GAAG,CAACE,QAAtB,cAAkCN,IAAlC,cAA0CmB,EAA1C;YACAf,GAAG,CAACG,YAAJ,CAAiBC,MAAjB,CAAwB,QAAxB,EAAkChB,UAAU,CAACC,MAAD,CAA5C;;mBACkBhB,KAAK,CAAC2B,GAAD,EAAM;cAAE1B,MAAM,EAAE,KAAV;cAAiBwB,OAAO,EAAPA;aAAvB,CAPb;;;YAOJY,GAPI;;;mBASWA,GAAG,CAAClC,IAAJ,EATX;;;YASFA,MATE;YAUFC,GAVE,GAUIC,IAAI,CAACC,KAAL,CAAWH,MAAX,CAVJ;8CAWDC,GAXC;;;;;YAaRP,OAAO,CAACC,GAAR,CAAY,kDAAZ;YACAD,OAAO,CAACC,GAAR,CAAYK,IAAZ;kBACMA,IAfE;;;;;;;;GAAH;;kBAAHsC,GAAG;;;GAAT;;AAkBA,IAAME,OAAM;;AAAA;;;2BAAG;;;;;;;YAASC,IAAT,UAASA,IAAT,EAAerB,IAAf,UAAeA,IAAf,EAAqBmB,EAArB,UAAqBA,EAArB,EAAyB1B,MAAzB,UAAyBA,MAAzB,EAAiCuB,IAAjC,UAAiCA,IAAjC,EAAuC7B,WAAvC,UAAuCA,WAAvC;gBACT,CAACkC,IAAL,EAAWA,IAAI,GAAGL,IAAI,CAACK,IAAZ;YACLrD,IAFO,GAEA,IAAIiD,QAAJ,EAFA;YAGbR,MAAM,CAACC,OAAP,CAAeM,IAAf,EAAqBtB,GAArB,CAAyB;;kBAAEkB,CAAF;kBAAKC,CAAL;;qBAAY7C,IAAI,CAACwC,MAAL,CAAYI,CAAZ,EAAeC,CAAf,CAAZ;aAAzB;YACMX,OAJO;cAKXC,aAAa,mBAAYhB,WAAZ,CALF;0BAMCkC;eACTrD,IAAI,CAACsD,UAAL,EAPQ;YASPlB,GATO,GASD,IAAIC,GAAJ,CAAQ,6BAAR,CATC;YAUbD,GAAG,CAACE,QAAJ,aAAkBF,GAAG,CAACE,QAAtB,cAAkCN,IAAlC,cAA0CmB,EAA1C;YACAf,GAAG,CAACG,YAAJ,CAAiBC,MAAjB,CAAwB,QAAxB,EAAkChB,UAAU,CAACC,MAAD,CAA5C;;mBACkBhB,KAAK,CAAC2B,GAAD,EAAM;cAAE1B,MAAM,EAAE,OAAV;cAAmBV,IAAI,EAAJA,IAAnB;cAAyBkC,OAAO,EAAPA;aAA/B,CAZV;;;YAYPY,GAZO;;;mBAeQA,GAAG,CAAClC,IAAJ,EAfR;;;YAeLA,MAfK;YAgBLC,GAhBK,GAgBCC,IAAI,CAACC,KAAL,CAAWH,MAAX,CAhBD;8CAiBJC,GAjBI;;;;;YAmBXP,OAAO,CAACC,GAAR,CAAY,kDAAZ;YACAD,OAAO,CAACC,GAAR,CAAYK,IAAZ;kBACMA,IArBK;;;;;;;;GAAH;;kBAANwC,MAAM;;;GAAZ;;AAwBA,IAAMG,OAAM;;AAAA;;;2BAAG;;;;;;;YAASvB,IAAT,UAASA,IAAT,EAAemB,EAAf,UAAeA,EAAf,EAAmBhC,WAAnB,UAAmBA,WAAnB;YACPe,OADO,GACG;cACdC,aAAa,mBAAYhB,WAAZ;aAFF;YAIPiB,GAJO,GAID,IAAIC,GAAJ,CAAQ,6BAAR,CAJC;YAKbD,GAAG,CAACE,QAAJ,aAAkBF,GAAG,CAACE,QAAtB,cAAkCN,IAAlC,cAA0CmB,EAA1C;;mBACkB1C,KAAK,CAAC2B,GAAD,EAAM;cAAE1B,MAAM,EAAE,QAAV;cAAoBwB,OAAO,EAAPA;aAA1B,CANV;;;YAMPY,GANO;;;mBAQQA,GAAG,CAAClC,IAAJ,EARR;;;YAQLA,MARK;YASLC,GATK,GASCC,IAAI,CAACC,KAAL,CAAWH,MAAX,CATD;8CAUJC,GAVI;;;;;YAYXP,OAAO,CAACC,GAAR,CAAY,kDAAZ;YACAD,OAAO,CAACC,GAAR,CAAYK,IAAZ;kBACMA,IAdK;;;;;;;;GAAH;;kBAAN2C,MAAM;;;GAAZ;;;;IAmBMC;;;wBAOD;QALD5D,QAKC,UALDA,QAKC;QAJDC,YAIC,UAJDA,YAIC;QAHDuB,YAGC,UAHDA,YAGC;QAFDD,WAEC,UAFDA,WAEC;QADDsC,iBACC,UADDA,iBACC;;;;QACG,CAAC7D,QAAD,IAAa,CAACC,YAAlB,EACE,MAAM,6DAAN;SACGD,QAAL,GAAgBA,QAAhB;SACKC,YAAL,GAAoBA,YAApB;SACKuB,YAAL,GAAoBA,YAApB;SACKD,WAAL,GAAmBA,WAAnB;SACKsC,iBAAL,GAAyBA,iBAAzB;;;;;;;;;;;;;;;gBAEgB3D,cAAAA,MAAMC,qBAAAA;;sBAClB,CAACD,IAAD,IAAS,CAACC;;;;;sBACN;;;;uBACoCJ,UAAS,CAAC;kBACpDC,QAAQ,EAAE,KAAKA,QADqC;kBAEpDC,YAAY,EAAE,KAAKA,YAFiC;kBAGpDC,IAAI,EAAJA,IAHoD;kBAIpDC,WAAW,EAAXA;iBAJmD;;;;gBAA7CqB,sBAAAA;gBAAcD,qBAAAA;;qBAMlBA;;;;;qBACGA,WAAL,GAAmBA,WAAnB;qBACKC,YAAL,GAAoBA,YAApB;oBACIA,YAAY,IAAI,KAAKqC,iBAAzB,EACE,KAAKA,iBAAL,CAAuBrC,YAAvB;kDACK;kBAAED,WAAW,EAAXA,WAAF;kBAAeC,YAAY,EAAZA;;;;sBAEhB;;;;;;;;;;;;;;;;;;;;;;;;;;kDAID,KAAKA,YAAL;;;;;;;;;;;;;;;;;;;;;;;;;;qBAGH,KAAKA;;;;;mDAAqB,KAAKA;;;;uBACT,KAAKsC,eAAL;;;qBAArBtC;mDACE,KAAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;qBAGR,KAAKD;;;;;mDAAoB,KAAKA,WAAL;;;;uBACFwC,gBAAgB;;;gBAArCvC;;oBACDA;;;;;sBACG;;;;uBAC8CE,eAAc,CAAC;kBACnE1B,QAAQ,EAAE,KAAKA,QADoD;kBAEnEC,YAAY,EAAE,KAAKA,YAFgD;kBAGnEuB,YAAY,EAAZA;iBAHkE;;;;gBAA5DD,qBAAAA;gBAA2ByC,kBAAdxC;qBAKhBD,WAAL,GAAmBA,WAAnB;;oBACIyC,QAAJ,EAAc;uBACPxC,YAAL,GAAoBwC,QAApB;sBACI,KAAKH,iBAAT,EAA4B,KAAKA,iBAAL,CAAuBG,QAAvB;;;mDAEvBC,OAAO,CAAC1C;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAELa,cAAAA,MAAMmB,YAAAA,IAAI1B,gBAAAA;;uBACM,KAAKH,cAAL;;;gBAApBH;mDACC+B,IAAG,CAAC;kBAAElB,IAAI,EAAJA,IAAF;kBAAQmB,EAAE,EAAFA,EAAR;kBAAY1B,MAAM,EAANA,MAAZ;kBAAoBN,WAAW,EAAXA;iBAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAECa,cAAAA,MAAMP,gBAAAA;;uBACS,KAAKH,cAAL;;;gBAApBH;mDACCY,KAAI,CAAC;kBAAEC,IAAI,EAAJA,IAAF;kBAAQP,MAAM,EAANA,MAAR;kBAAgBN,WAAW,EAAXA;iBAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAEEa,cAAAA,MAAMP,gBAAAA,QAAQuB,cAAAA;;uBACD,KAAK1B,cAAL;;;gBAApBH;mDACC4B,OAAM,CAAC;kBAAEf,IAAI,EAAJA,IAAF;kBAAQP,MAAM,EAANA,MAAR;kBAAgBuB,IAAI,EAAJA,IAAhB;kBAAsB7B,WAAW,EAAXA;iBAAvB;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAEAa,cAAAA,MAAMmB,YAAAA,IAAI1B,gBAAAA,QAAQ4B,cAAAA,MAAML,cAAAA;;uBACX,KAAK1B,cAAL;;;gBAApBH;mDACCiC,OAAM,CAAC;kBACZpB,IAAI,EAAJA,IADY;kBAEZmB,EAAE,EAAFA,EAFY;kBAGZ1B,MAAM,EAANA,MAHY;kBAIZuB,IAAI,EAAJA,IAJY;kBAKZK,IAAI,EAAJA,IALY;kBAMZlC,WAAW,EAAXA;iBANW;;;;;;;;;;;;;;;;;;;;;;;;;;;gBASAa,cAAAA,MAAMmB,YAAAA;;uBACO,KAAK7B,cAAL;;;gBAApBH;mDACCoC,OAAM,CAAC;kBAAEvB,IAAI,EAAJA,IAAF;kBAAQmB,EAAE,EAAFA,EAAR;kBAAYhC,WAAW,EAAXA;iBAAb;;;;;;;;;;;;;;;;;;;;;kDAEC2C,MAAMX;;;;;;;;gBAAI1B,uEAAS;;uBACR,KAAKyB,GAAL,CAAS;kBAAElB,IAAI,EAAE8B,IAAR;kBAAcX,EAAE,EAAFA,EAAd;kBAAkB1B,MAAM,EAANA;iBAA3B;;;gBAAnBsC;mDACC,IAAIC,UAAJ,CAAe,IAAf,EAAqB;kBAAED,UAAU,EAAVA,UAAF;kBAActC,MAAM,EAANA,MAAd;kBAAsB0B,EAAE,EAAFA,EAAtB;kBAA0BW,IAAI,EAAJA;iBAA/C;;;;;;;;;;;;;;;;;;;;;;;IAKLE;;;sBACQC,IAAZ,UAA0D;QAAtCZ,IAAsC,UAAtCA,IAAsC;QAAhCF,EAAgC,UAAhCA,EAAgC;QAA5BY,UAA4B,UAA5BA,UAA4B;QAAhBtC,MAAgB,UAAhBA,MAAgB;QAARqC,IAAQ,UAARA,IAAQ;;;;SACnDG,IAAL,GAAYA,IAAZ;SACKF,UAAL,GAAkBA,UAAlB;QACItC,MAAJ,EAAY,KAAKA,MAAL,GAAcA,MAAd;SACPqC,IAAL,GAAY9B,IAAZ;SACKmB,EAAL,GAAUA,EAAE,GAAGA,EAAH,GAAQY,UAAU,CAACZ,EAA/B;SACKE,IAAL,GAAYA,IAAI,GAAGA,IAAH,GAAUU,UAAU,CAACV,IAArC;;;;;;;;kDAEWa;;;;;;;uBACO,KAAKD,IAAL,CAAUb,MAAV,CAAiB;kBACjCpB,IAAI,EAAE,KAAK8B,IADsB;kBAEjCX,EAAE,EAAE,KAAKA,EAFwB;kBAGjCH,IAAI,EAAEkB;iBAHU;;;gBAAZpB;qBAKDiB,UAAL,qBAAuB,KAAKA,UAA5B;kBAAwCjB,GAAG,EAAHA;;qBACnCO,IAAL,GAAYP,GAAG,CAACO,IAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;mDAGO,KAAKY,IAAL,CAAUV,MAAV,CAAiB;kBAAEvB,IAAI,EAAE,KAAK8B,IAAb;kBAAmBX,EAAE,EAAE,KAAKA;iBAA7C;;;;;;;;;;;;;;;;;;;;;;;"}